# â˜ï¸ äº‘æœåŠ¡å™¨éƒ¨ç½²æŒ‡å—

æœ¬æ–‡æ¡£è¯´æ˜å¦‚ä½•å°†ä¿¡ä»¤æœåŠ¡å™¨éƒ¨ç½²åˆ°äº‘æœåŠ¡å™¨ï¼ˆå¦‚é˜¿é‡Œäº‘ã€è…¾è®¯äº‘ã€AWS ç­‰ï¼‰ã€‚

---

## ğŸ“‹ éƒ¨ç½²æ¶æ„

### åŸæ¶æ„ï¼ˆæœ¬åœ°æµ‹è¯•ï¼‰
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æµè§ˆå™¨      â”‚â”€â”€â”€â”€â–ºâ”‚ ä¿¡ä»¤æœåŠ¡å™¨    â”‚â—„â”€â”€â”€â”€â”‚  Orin è®¾å¤‡   â”‚
â”‚ æ§åˆ¶ç«¯       â”‚     â”‚ (localhost)  â”‚     â”‚ æŒ–æ˜æœºç¨‹åº   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    åŒä¸€å±€åŸŸç½‘ï¼ˆ192.168.3.xï¼‰
```

### äº‘éƒ¨ç½²æ¶æ„ï¼ˆæ¨èï¼‰
```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   äº‘æœåŠ¡å™¨        â”‚
                    â”‚  (å…¬ç½‘ IP)       â”‚
                    â”‚  ä¿¡ä»¤æœåŠ¡å™¨       â”‚
                    â”‚  8090 ç«¯å£        â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚                â”‚                â”‚
            â–¼                â–¼                â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  æ§åˆ¶ç«¯ A    â”‚  â”‚  æ§åˆ¶ç«¯ B     â”‚  â”‚  Orin è®¾å¤‡   â”‚
    â”‚ (ä»»ä½•ä½ç½®)   â”‚  â”‚  (ä»»ä½•ä½ç½®)   â”‚  â”‚  (å·¥åœ°ç°åœº)  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        å®¶é‡Œ/åŠå…¬å®¤      ç§»åŠ¨ç«¯            4G/5G/WiFi
```

**ä¼˜åŠ¿**ï¼š
- âœ… æ§åˆ¶ç«¯å¯ä»¥ä»ä»»ä½•åœ°æ–¹è®¿é—®
- âœ… å¤šä¸ªæ§åˆ¶ç«¯å¯ä»¥åŒæ—¶ç›‘æ§
- âœ… ä¸éœ€è¦å…¬ç½‘ IP æˆ–ç«¯å£æ˜ å°„
- âœ… ä¿¡ä»¤æœåŠ¡å™¨ä½œä¸ºä¸­ç»§ï¼Œæ›´ç¨³å®š

---

## ğŸ–¥ï¸ äº‘æœåŠ¡å™¨è¦æ±‚

### æœ€ä½é…ç½®
- **CPU**: 1 æ ¸
- **å†…å­˜**: 1GB
- **å¸¦å®½**: 1Mbpsï¼ˆä¿¡ä»¤æœåŠ¡å™¨æœ¬èº«æµé‡å¾ˆå°ï¼‰
- **ç³»ç»Ÿ**: Ubuntu 20.04/22.04 æˆ– CentOS 7/8

### æ¨èé…ç½®
- **CPU**: 2 æ ¸
- **å†…å­˜**: 2GB
- **å¸¦å®½**: 3Mbpsï¼ˆæ”¯æŒæ›´å¤šå¹¶å‘è¿æ¥ï¼‰
- **ç³»ç»Ÿ**: Ubuntu 22.04 LTS

### äº‘æœåŠ¡å•†é€‰æ‹©
- é˜¿é‡Œäº‘ ECS
- è…¾è®¯äº‘ CVM
- AWS EC2
- åä¸ºäº‘ ECS
- DigitalOcean Droplet

**æ³¨æ„**ï¼šé€‰æ‹©ç¦» Orin è®¾å¤‡ï¼ˆå·¥åœ°ï¼‰è¾ƒè¿‘çš„åŒºåŸŸï¼Œå¯é™ä½å»¶è¿Ÿã€‚

---

## ğŸš€ éƒ¨ç½²æ­¥éª¤

### ç¬¬ 1 æ­¥ï¼šè´­ä¹°å’Œé…ç½®äº‘æœåŠ¡å™¨

1. **è´­ä¹°äº‘æœåŠ¡å™¨**
   - é€‰æ‹©åˆé€‚çš„åŒºåŸŸï¼ˆå¦‚ï¼šåä¸œã€åå—ï¼‰
   - é€‰æ‹© Ubuntu 22.04 ç³»ç»Ÿ
   - é…ç½®å®‰å…¨ç»„/é˜²ç«å¢™ï¼ˆè§ä¸‹æ–¹ï¼‰

2. **è®°å½•å…¬ç½‘ IP**
   ```
   å‡è®¾ä½ çš„äº‘æœåŠ¡å™¨å…¬ç½‘ IP æ˜¯: 47.98.123.45
   ```

3. **SSH ç™»å½•äº‘æœåŠ¡å™¨**
   ```bash
   ssh root@47.98.123.45
   # æˆ–ä½¿ç”¨å¯†é’¥
   ssh -i your-key.pem ubuntu@47.98.123.45
   ```

---

### ç¬¬ 2 æ­¥ï¼šé…ç½®é˜²ç«å¢™/å®‰å…¨ç»„

**é‡è¦**ï¼šå¿…é¡»å¼€æ”¾ä»¥ä¸‹ç«¯å£

| ç«¯å£ | åè®® | è¯´æ˜ | å¿…éœ€ |
|-----|------|------|------|
| 22 | TCP | SSH è¿œç¨‹ç®¡ç† | âœ… |
| 8090 | TCP | WebSocket ä¿¡ä»¤æœåŠ¡å™¨ | âœ… |
| 8080 | TCP | Web æ§åˆ¶é¡µé¢ï¼ˆå¯é€‰ï¼‰ | â­• |

#### é˜¿é‡Œäº‘/è…¾è®¯äº‘é…ç½®

**åœ¨äº‘æ§åˆ¶å°ï¼š**
1. è¿›å…¥ **å®‰å…¨ç»„** è®¾ç½®
2. æ·»åŠ å…¥ç«™è§„åˆ™ï¼š
   - ç«¯å£ï¼š8090
   - åè®®ï¼šTCP
   - æºåœ°å€ï¼š0.0.0.0/0ï¼ˆå…è®¸æ‰€æœ‰ï¼‰
   - æè¿°ï¼šWebRTC ä¿¡ä»¤æœåŠ¡å™¨

**åœ¨æœåŠ¡å™¨å†…éƒ¨ï¼ˆUbuntuï¼‰ï¼š**
```bash
# æ£€æŸ¥é˜²ç«å¢™çŠ¶æ€
sudo ufw status

# å¦‚æœé˜²ç«å¢™å¯ç”¨ï¼Œå¼€æ”¾ç«¯å£
sudo ufw allow 22/tcp
sudo ufw allow 8090/tcp
sudo ufw allow 8080/tcp  # å¦‚æœéœ€è¦ Web é¡µé¢

# é‡å¯é˜²ç«å¢™
sudo ufw reload
```

---

### ç¬¬ 3 æ­¥ï¼šå®‰è£…å’Œéƒ¨ç½²ä¿¡ä»¤æœåŠ¡å™¨

#### æ–¹å¼ 1ï¼šä»æœ¬åœ°ç¼–è¯‘å¹¶ä¸Šä¼ ï¼ˆæ¨èï¼‰

**åœ¨æœ¬åœ° Orin è®¾å¤‡ä¸Šï¼š**

```bash
cd /home/orin64/MyCode/PionWebrtc/excavator

# ä¸º Linux x86_64 äº¤å‰ç¼–è¯‘ï¼ˆå¦‚æœäº‘æœåŠ¡å™¨æ˜¯ x86_64ï¼‰
GOOS=linux GOARCH=amd64 go build -o bin/signaling-amd64 ./cmd/signaling

# å¦‚æœäº‘æœåŠ¡å™¨ä¹Ÿæ˜¯ ARM64ï¼ˆå¦‚åä¸ºé²²é¹ï¼‰
GOOS=linux GOARCH=arm64 go build -o bin/signaling-arm64 ./cmd/signaling

# ä¸Šä¼ åˆ°äº‘æœåŠ¡å™¨
scp bin/signaling-amd64 root@47.98.123.45:/root/signaling
```

#### æ–¹å¼ 2ï¼šåœ¨äº‘æœåŠ¡å™¨ä¸Šç¼–è¯‘

**åœ¨äº‘æœåŠ¡å™¨ä¸Šï¼š**

```bash
# å®‰è£… Goï¼ˆå¦‚æœæ²¡æœ‰ï¼‰
wget https://go.dev/dl/go1.21.5.linux-amd64.tar.gz
sudo tar -C /usr/local -xzf go1.21.5.linux-amd64.tar.gz
export PATH=$PATH:/usr/local/go/bin
echo 'export PATH=$PATH:/usr/local/go/bin' >> ~/.bashrc

# å…‹éš†ä»£ç ï¼ˆæˆ–ä¸Šä¼ ä»£ç ï¼‰
mkdir -p ~/excavator
cd ~/excavator

# å‡è®¾ä½ å·²ç»ä¸Šä¼ äº†ä»£ç 
# æˆ–è€…ä½¿ç”¨ git cloneï¼ˆå¦‚æœä»£ç åœ¨ GitHubï¼‰

# ç¼–è¯‘
export GOPROXY=https://goproxy.cn,direct
go build -o signaling ./cmd/signaling/main.go
```

---

### ç¬¬ 4 æ­¥ï¼šåˆ›å»ºå¯åŠ¨è„šæœ¬

**åœ¨äº‘æœåŠ¡å™¨ä¸Šåˆ›å»º `/root/start-signaling.sh`ï¼š**

```bash
cat > /root/start-signaling.sh << 'EOF'
#!/bin/bash

# ä¿¡ä»¤æœåŠ¡å™¨å¯åŠ¨è„šæœ¬

set -e

SIGNALING_BIN="/root/signaling"
LISTEN_ADDR=":8090"
LOG_FILE="/var/log/signaling.log"

# æ£€æŸ¥å¯æ‰§è¡Œæ–‡ä»¶
if [ ! -f "$SIGNALING_BIN" ]; then
    echo "âŒ æ‰¾ä¸åˆ°ä¿¡ä»¤æœåŠ¡å™¨: $SIGNALING_BIN"
    exit 1
fi

# åˆ›å»ºæ—¥å¿—ç›®å½•
sudo mkdir -p $(dirname $LOG_FILE)

echo "ğŸš€ å¯åŠ¨ä¿¡ä»¤æœåŠ¡å™¨..."
echo "ğŸ“¡ ç›‘å¬åœ°å€: $LISTEN_ADDR"
echo "ğŸ“ æ—¥å¿—æ–‡ä»¶: $LOG_FILE"

# å¯åŠ¨æœåŠ¡å™¨
nohup $SIGNALING_BIN -addr $LISTEN_ADDR >> $LOG_FILE 2>&1 &

PID=$!
echo "âœ… ä¿¡ä»¤æœåŠ¡å™¨å·²å¯åŠ¨ (PID: $PID)"
echo "$PID" > /var/run/signaling.pid

# ç­‰å¾…æœåŠ¡å™¨å¯åŠ¨
sleep 2

# æ£€æŸ¥è¿›ç¨‹
if ps -p $PID > /dev/null; then
    echo "âœ… æœåŠ¡è¿è¡Œæ­£å¸¸"
    echo ""
    echo "ğŸ“Š çŠ¶æ€æŸ¥è¯¢:"
    echo "   curl http://localhost:8090/status"
    echo ""
    echo "ğŸ›‘ åœæ­¢æœåŠ¡:"
    echo "   kill $PID"
else
    echo "âŒ æœåŠ¡å¯åŠ¨å¤±è´¥ï¼ŒæŸ¥çœ‹æ—¥å¿—:"
    echo "   tail -f $LOG_FILE"
    exit 1
fi
EOF

# æ·»åŠ æ‰§è¡Œæƒé™
chmod +x /root/start-signaling.sh
```

---

### ç¬¬ 5 æ­¥ï¼šé…ç½®ç³»ç»ŸæœåŠ¡ï¼ˆå¯é€‰ï¼Œæ¨èï¼‰

ä½¿ç”¨ systemd å®ç°å¼€æœºè‡ªå¯åŠ¨å’Œè‡ªåŠ¨é‡å¯ã€‚

**åˆ›å»º `/etc/systemd/system/signaling.service`ï¼š**

```bash
sudo tee /etc/systemd/system/signaling.service > /dev/null << 'EOF'
[Unit]
Description=WebRTC Signaling Server
After=network.target

[Service]
Type=simple
User=root
WorkingDirectory=/root
ExecStart=/root/signaling -addr :8090
Restart=always
RestartSec=5
StandardOutput=append:/var/log/signaling.log
StandardError=append:/var/log/signaling.log

[Install]
WantedBy=multi-user.target
EOF

# é‡è½½ systemd
sudo systemctl daemon-reload

# å¯åŠ¨æœåŠ¡
sudo systemctl start signaling

# æŸ¥çœ‹çŠ¶æ€
sudo systemctl status signaling

# è®¾ç½®å¼€æœºè‡ªå¯åŠ¨
sudo systemctl enable signaling
```

**systemd æœåŠ¡ç®¡ç†å‘½ä»¤ï¼š**

```bash
# å¯åŠ¨
sudo systemctl start signaling

# åœæ­¢
sudo systemctl stop signaling

# é‡å¯
sudo systemctl restart signaling

# æŸ¥çœ‹çŠ¶æ€
sudo systemctl status signaling

# æŸ¥çœ‹æ—¥å¿—
sudo journalctl -u signaling -f

# æˆ–
tail -f /var/log/signaling.log
```

---

### ç¬¬ 6 æ­¥ï¼šéªŒè¯éƒ¨ç½²

**åœ¨äº‘æœåŠ¡å™¨ä¸Šï¼š**

```bash
# æ£€æŸ¥ç«¯å£ç›‘å¬
sudo netstat -tlnp | grep 8090
# æˆ–
sudo ss -tlnp | grep 8090

# åº”è¯¥çœ‹åˆ°ç±»ä¼¼ï¼š
# tcp6       0      0 :::8090                 :::*                    LISTEN      12345/signaling

# æµ‹è¯•æœ¬åœ°è¿æ¥
curl http://localhost:8090/status
# åº”è¯¥è¿”å› JSON å“åº”

# æ£€æŸ¥è¿›ç¨‹
ps aux | grep signaling
```

**ä»æœ¬åœ°æµ‹è¯•è¿æ¥ï¼š**

```bash
# æ›¿æ¢ä¸ºä½ çš„äº‘æœåŠ¡å™¨å…¬ç½‘ IP
curl http://47.98.123.45:8090/status

# æˆ–ä½¿ç”¨ WebSocket å®¢æˆ·ç«¯æµ‹è¯•
wscat -c ws://47.98.123.45:8090/ws
```

---

## ğŸ”§ å®¢æˆ·ç«¯é…ç½®æ›´æ–°

### 1. æ›´æ–° Orin è®¾å¤‡ï¼ˆæŒ–æ˜æœºç«¯ï¼‰

**ä¿®æ”¹å¯åŠ¨è„šæœ¬æˆ–ç›´æ¥è¿è¡Œï¼š**

```bash
# ä¹‹å‰ï¼ˆæœ¬åœ°ï¼‰
./bin/excavator -signaling ws://127.0.0.1:8090/ws

# ç°åœ¨ï¼ˆäº‘æœåŠ¡å™¨ï¼‰
./bin/excavator -signaling ws://47.98.123.45:8090/ws \
  -camera /dev/video0 \
  -enable-ros2 true
```

**æˆ–æ›´æ–° `scripts/start-excavator.sh`ï¼š**

```bash
# ä¿®æ”¹è¿™ä¸€è¡Œ
SIGNALING_SERVER="ws://47.98.123.45:8090/ws"
```

### 2. æ›´æ–°æ§åˆ¶ç«¯ç½‘é¡µ

**æ–¹å¼ 1ï¼šä¿®æ”¹ `controller.html`**

```bash
cd /home/orin64/MyCode/PionWebrtc/excavator/web
nano controller.html

# æ‰¾åˆ°è¿™ä¸€è¡Œï¼ˆçº¦ 193 è¡Œï¼‰ï¼š
const SIGNALING_SERVER = 'ws://192.168.0.87:8090/ws';

# æ”¹ä¸ºï¼š
const SIGNALING_SERVER = 'ws://47.98.123.45:8090/ws';
```

**æ–¹å¼ 2ï¼šå°†ç½‘é¡µä¹Ÿéƒ¨ç½²åˆ°äº‘æœåŠ¡å™¨**

```bash
# åœ¨äº‘æœåŠ¡å™¨ä¸Š
mkdir -p /var/www/excavator
cd /var/www/excavator

# ä»æœ¬åœ°ä¸Šä¼  controller.html
scp ~/MyCode/PionWebrtc/excavator/web/controller.html root@47.98.123.45:/var/www/excavator/

# å¯åŠ¨ç®€å•çš„ HTTP æœåŠ¡å™¨
cd /var/www/excavator
python3 -m http.server 8080 &

# æˆ–ä½¿ç”¨ nginxï¼ˆæ¨èç”Ÿäº§ç¯å¢ƒï¼‰
sudo apt install nginx
sudo cp controller.html /var/www/html/
```

ç„¶åè®¿é—®ï¼š`http://47.98.123.45:8080/controller.html`

---

## ğŸ” å®‰å…¨æ€§å»ºè®®

### 1. å¯ç”¨ HTTPS/WSSï¼ˆå¼ºçƒˆæ¨èï¼‰

ä½¿ç”¨ Let's Encrypt å…è´¹è¯ä¹¦ï¼š

```bash
# å®‰è£… certbot
sudo apt install certbot

# è·å–è¯ä¹¦ï¼ˆéœ€è¦åŸŸåï¼‰
sudo certbot certonly --standalone -d your-domain.com

# è¯ä¹¦ä½ç½®
# /etc/letsencrypt/live/your-domain.com/fullchain.pem
# /etc/letsencrypt/live/your-domain.com/privkey.pem
```

**ä¿®æ”¹ä¿¡ä»¤æœåŠ¡å™¨æ”¯æŒ TLSï¼ˆéœ€è¦ä¿®æ”¹ä»£ç ï¼‰**ï¼š

```go
// cmd/signaling/main.go
// æ·»åŠ  TLS æ”¯æŒ
http.ListenAndServeTLS(":8090", "cert.pem", "key.pem", nil)
```

### 2. æ·»åŠ è®¤è¯ï¼ˆæ¨èï¼‰

**ç®€å•çš„ Token è®¤è¯ï¼š**

ä¿®æ”¹ `controller.html`ï¼š
```javascript
const SIGNALING_SERVER = 'ws://47.98.123.45:8090/ws?token=your-secret-token';
```

ä¿®æ”¹ `cmd/signaling/main.go` æ·»åŠ  token éªŒè¯é€»è¾‘ã€‚

### 3. é™åˆ¶æ¥æº IPï¼ˆå¯é€‰ï¼‰

åœ¨äº‘æœåŠ¡å™¨å®‰å…¨ç»„åªå…è®¸ç‰¹å®š IPï¼š

```bash
# é˜¿é‡Œäº‘/è…¾è®¯äº‘æ§åˆ¶å°
# å®‰å…¨ç»„è§„åˆ™ > æ·»åŠ 
# ç«¯å£ï¼š8090
# æºåœ°å€ï¼š123.45.67.89/32  ï¼ˆä½ çš„å›ºå®š IPï¼‰
```

### 4. å®šæœŸæ›´æ–°

```bash
# å®šæœŸæ›´æ–°ç³»ç»Ÿ
sudo apt update && sudo apt upgrade -y

# é‡æ–°ç¼–è¯‘å’Œéƒ¨ç½²æœ€æ–°ä»£ç 
```

---

## ğŸ“Š ç›‘æ§å’Œè¿ç»´

### æŸ¥çœ‹æ—¥å¿—

```bash
# å®æ—¶æŸ¥çœ‹æ—¥å¿—
tail -f /var/log/signaling.log

# æˆ–ä½¿ç”¨ journalctl
sudo journalctl -u signaling -f

# æŸ¥çœ‹æœ€è¿‘ 100 è¡Œ
sudo journalctl -u signaling -n 100
```

### æ€§èƒ½ç›‘æ§

```bash
# CPU å’Œå†…å­˜å ç”¨
top -p $(cat /var/run/signaling.pid)

# ç½‘ç»œè¿æ¥æ•°
netstat -an | grep 8090 | wc -l

# å¸¦å®½ä½¿ç”¨
sudo iftop -i eth0
```

### è®¾ç½®å‘Šè­¦ï¼ˆå¯é€‰ï¼‰

ä½¿ç”¨äº‘æœåŠ¡å•†çš„ç›‘æ§æœåŠ¡ï¼š
- é˜¿é‡Œäº‘ï¼šäº‘ç›‘æ§
- è…¾è®¯äº‘ï¼šäº‘ç›‘æ§
- AWSï¼šCloudWatch

ç›‘æ§æŒ‡æ ‡ï¼š
- CPU ä½¿ç”¨ç‡ > 80%
- å†…å­˜ä½¿ç”¨ç‡ > 80%
- è¿›ç¨‹å­˜æ´»çŠ¶æ€

---

## ğŸ› æ•…éšœæ’æŸ¥

### é—®é¢˜ 1ï¼šæ— æ³•è¿æ¥åˆ°ä¿¡ä»¤æœåŠ¡å™¨

**æ£€æŸ¥é¡¹ï¼š**

1. **äº‘æœåŠ¡å™¨é˜²ç«å¢™**
   ```bash
   sudo ufw status
   sudo ufw allow 8090/tcp
   ```

2. **äº‘æœåŠ¡å•†å®‰å…¨ç»„**
   - æ£€æŸ¥æ˜¯å¦å¼€æ”¾ 8090 ç«¯å£
   - æºåœ°å€æ˜¯å¦è®¾ç½®ä¸º 0.0.0.0/0

3. **æœåŠ¡æ˜¯å¦è¿è¡Œ**
   ```bash
   sudo systemctl status signaling
   ps aux | grep signaling
   ```

4. **æµ‹è¯•æœ¬åœ°è¿æ¥**
   ```bash
   # åœ¨äº‘æœåŠ¡å™¨ä¸Š
   curl http://localhost:8090/status
   ```

5. **æµ‹è¯•å¤–ç½‘è¿æ¥**
   ```bash
   # åœ¨æœ¬åœ°
   curl http://47.98.123.45:8090/status
   ```

### é—®é¢˜ 2ï¼šæœåŠ¡å¯åŠ¨å¤±è´¥

**æŸ¥çœ‹æ—¥å¿—ï¼š**
```bash
tail -f /var/log/signaling.log
sudo journalctl -u signaling -n 50
```

**å¸¸è§åŸå› ï¼š**
- ç«¯å£è¢«å ç”¨ï¼š`sudo lsof -i:8090`
- æƒé™é—®é¢˜ï¼šæ£€æŸ¥å¯æ‰§è¡Œæ–‡ä»¶æƒé™
- ä¾èµ–åº“ç¼ºå¤±ï¼šé‡æ–°ç¼–è¯‘

### é—®é¢˜ 3ï¼šWebSocket è¿æ¥æ–­å¼€

**å¯èƒ½åŸå› ï¼š**
- äº‘æœåŠ¡å™¨ NAT è¶…æ—¶ï¼ˆè°ƒæ•´è¶…æ—¶è®¾ç½®ï¼‰
- ç½‘ç»œä¸ç¨³å®šï¼ˆä½¿ç”¨ STUN/TURNï¼‰
- å®¢æˆ·ç«¯ç½‘ç»œåˆ‡æ¢ï¼ˆå®ç°é‡è¿æœºåˆ¶ï¼‰

---

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### å¢åŠ å¹¶å‘è¿æ¥æ•°

```bash
# ä¿®æ”¹ç³»ç»Ÿé™åˆ¶
sudo vim /etc/security/limits.conf

# æ·»åŠ ï¼š
* soft nofile 65535
* hard nofile 65535

# é‡å¯ç³»ç»Ÿæˆ–é‡æ–°ç™»å½•
```

### ä½¿ç”¨ Nginx åå‘ä»£ç†

```nginx
# /etc/nginx/sites-available/signaling
upstream signaling {
    server 127.0.0.1:8090;
}

server {
    listen 80;
    server_name your-domain.com;

    location /ws {
        proxy_pass http://signaling;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }

    location /status {
        proxy_pass http://signaling;
    }
}
```

---

## ğŸ“ å®Œæ•´éƒ¨ç½²æ£€æŸ¥æ¸…å•

- [ ] è´­ä¹°äº‘æœåŠ¡å™¨å¹¶è®°å½•å…¬ç½‘ IP
- [ ] é…ç½®å®‰å…¨ç»„å¼€æ”¾ 8090 ç«¯å£
- [ ] SSH ç™»å½•äº‘æœåŠ¡å™¨
- [ ] ä¸Šä¼ æˆ–ç¼–è¯‘ä¿¡ä»¤æœåŠ¡å™¨ç¨‹åº
- [ ] åˆ›å»ºå¯åŠ¨è„šæœ¬
- [ ] é…ç½® systemd æœåŠ¡
- [ ] å¯åŠ¨æœåŠ¡å¹¶éªŒè¯
- [ ] æµ‹è¯•å¤–ç½‘è¿æ¥
- [ ] æ›´æ–° Orin è®¾å¤‡é…ç½®
- [ ] æ›´æ–°æ§åˆ¶ç«¯ç½‘é¡µé…ç½®
- [ ] æµ‹è¯•å®Œæ•´æµç¨‹
- [ ] é…ç½®æ—¥å¿—å’Œç›‘æ§
- [ ] è®¾ç½®å¼€æœºè‡ªå¯åŠ¨

---

## ğŸ¯ å¿«é€Ÿéƒ¨ç½²è„šæœ¬

**ä¸€é”®éƒ¨ç½²è„šæœ¬ï¼ˆåœ¨äº‘æœåŠ¡å™¨ä¸Šè¿è¡Œï¼‰ï¼š**

```bash
#!/bin/bash
# å¿«é€Ÿéƒ¨ç½²ä¿¡ä»¤æœåŠ¡å™¨

set -e

echo "ğŸš€ å¼€å§‹éƒ¨ç½²ä¿¡ä»¤æœåŠ¡å™¨..."

# æ£€æŸ¥å‚æ•°
if [ $# -lt 1 ]; then
    echo "ç”¨æ³•: $0 <ä¿¡ä»¤æœåŠ¡å™¨å¯æ‰§è¡Œæ–‡ä»¶è·¯å¾„>"
    exit 1
fi

SIGNALING_BIN="$1"

# æ£€æŸ¥æ–‡ä»¶
if [ ! -f "$SIGNALING_BIN" ]; then
    echo "âŒ æ–‡ä»¶ä¸å­˜åœ¨: $SIGNALING_BIN"
    exit 1
fi

# å¤åˆ¶æ–‡ä»¶
sudo cp "$SIGNALING_BIN" /usr/local/bin/signaling
sudo chmod +x /usr/local/bin/signaling

# åˆ›å»º systemd æœåŠ¡
sudo tee /etc/systemd/system/signaling.service > /dev/null << 'EOF'
[Unit]
Description=WebRTC Signaling Server
After=network.target

[Service]
Type=simple
ExecStart=/usr/local/bin/signaling -addr :8090
Restart=always
RestartSec=5
StandardOutput=append:/var/log/signaling.log
StandardError=append:/var/log/signaling.log

[Install]
WantedBy=multi-user.target
EOF

# å¯åŠ¨æœåŠ¡
sudo systemctl daemon-reload
sudo systemctl enable signaling
sudo systemctl start signaling

# ç­‰å¾…å¯åŠ¨
sleep 2

# æ£€æŸ¥çŠ¶æ€
sudo systemctl status signaling

echo ""
echo "âœ… éƒ¨ç½²å®Œæˆï¼"
echo ""
echo "ğŸ“Š æŸ¥çœ‹çŠ¶æ€: sudo systemctl status signaling"
echo "ğŸ“ æŸ¥çœ‹æ—¥å¿—: tail -f /var/log/signaling.log"
echo "ğŸŒ è®¿é—®åœ°å€: ws://$(curl -s ifconfig.me):8090/ws"
```

ä¿å­˜ä¸º `deploy.sh` å¹¶è¿è¡Œï¼š
```bash
chmod +x deploy.sh
./deploy.sh /path/to/signaling
```

---

## ğŸ”— ç›¸å…³æ–‡æ¡£

- [README.md](./README.md) - é¡¹ç›®æ¦‚è¿°
- [EXAMPLES.md](./EXAMPLES.md) - ä½¿ç”¨ç¤ºä¾‹
- [ROS2_INTEGRATION.md](./ROS2_INTEGRATION.md) - ROS2 é›†æˆ

---

**éƒ¨ç½²å®Œæˆåï¼Œè®°å¾—æ›´æ–°æ‰€æœ‰å®¢æˆ·ç«¯çš„ä¿¡ä»¤æœåŠ¡å™¨åœ°å€ï¼** ğŸ‰

